<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù†ØµØ© Ø§Ù„Ù‡Ø¯Ø§ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>

<style>
body{
  font-family: Arial;
  text-align:center;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:white;
}
button{
  padding:8px 14px;
  margin:5px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button:hover{background:gold;}
input{
  padding:6px;
  margin:4px;
}
</style>
</head>

<body>

<h1>ğŸ“ Ù…Ù†ØµØ© Ø§Ù„Ù‡Ø¯Ø§ÙŠØ©</h1>
<div id="app"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>

const firebaseConfig = {
  apiKey: "Ø¶Ø¹_Ø§Ù„Ù…ÙØªØ§Ø­_Ù‡Ù†Ø§",
  authDomain: "math-platform-ca14a.firebaseapp.com",
  projectId: "math-platform-ca14a",
  storageBucket: "math-platform-ca14a.firebasestorage.app",
  messagingSenderId: "85119704109",
  appId: "1:85119704109:web:d91524643bdbf2477e2ca4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let questions = [];

function loadQuestions(){
  db.collection("questions").get().then(snapshot=>{
    questions = [];
    snapshot.forEach(doc=>{
      questions.push({
        id: doc.id,
        question: doc.data().question
      });
    });
  });
}

function start(){
  document.getElementById("app").innerHTML=`
    <button onclick="student()">Ø¯Ø®ÙˆÙ„ Ø·Ø§Ù„Ø¨</button>
    <button onclick="admin()">Ø¯Ø®ÙˆÙ„ Ù…Ø¹Ù„Ù…</button>
  `;
  loadQuestions();
}

function student(){
  loadQuestions();

  setTimeout(()=>{
    if(questions.length===0){
      alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯");
      return;
    }

    let q = questions[0];

    document.getElementById("app").innerHTML=`
      <h2>${q.question}</h2>
      <div id="result"></div>
      <br>
      <button onclick="start()">Ø±Ø¬ÙˆØ¹</button>
    `;
  },500);
}

function admin(){
  let pass=prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
  if(pass==="1234"){
    showAdmin();
  }else{
    alert("Ø®Ø·Ø£");
  }
}

function showAdmin(){
  document.getElementById("app").innerHTML=`
    <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

    <input id="q" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¤Ø§Ù„">
    <br>
    <button onclick="addQuestion()">Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</button>

    <h3>Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:</h3>
    <div id="list"></div>

    <br>
    <button onclick="start()">Ø±Ø¬ÙˆØ¹</button>
  `;

  renderList();
}

function addQuestion(){
  let text=document.getElementById("q").value;
  if(text==="") return;

  db.collection("questions").add({
    question:text
  }).then(()=>{
    loadQuestions();
    renderList();
  });
}

function renderList(){
  db.collection("questions").get().then(snapshot=>{
    let list=document.getElementById("list");
    list.innerHTML="";
    snapshot.forEach(doc=>{
      list.innerHTML+=`
        <p>
          ${doc.data().question}
          <button onclick="deleteQ('${doc.id}')">Ø­Ø°Ù</button>
        </p>
      `;
    });
  });
}

function deleteQ(id){
  db.collection("questions").doc(id).delete().then(()=>{
    loadQuestions();
    renderList();
  });
}

start();

</script>
</body>
</html>
